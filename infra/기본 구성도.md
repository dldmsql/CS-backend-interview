## 인프라 구성 - 기본편

> 해당 내용은 작성자 개인의 설계 방식이 담긴 내용이니, 참고만 하시길 바랍니다.

<br/>
온-프레미스 환경을 기준으로 가장 기본적인 구성안을 다음과 같이 작성한다. ( 단, 이때의 구성요소들은 물리적 선으로 연결되어 있다. )
<img src="/Users/dldmsql/github/study_cs/img/기본구성도.png"/>

인터넷망을 통해 들어오는 외부 사용자가 있다고 가정하자. <br/>
이 사용자가 보내는 요청은 가장 먼저 외부 방화벽을 거친다. 외부 방화벽을 거친 요청은 IPS를 통해 신뢰할 수 있는 패킷인지 검증 과정을 거친다. ( 여기서 DDoS 공격 같은 악성 트래픽을 탐지 및 대응한다. ) IPS를 거친 요청은 L3 ( 백본 스위치 )를 통해 L4 ( 로드밸런서 )로 간다. L4 에서는 웹 서버의 부하 분산을 담당한다. 

웹 서버는 정적 콘텐츠 제공, WAS의 부하 분산, 리버시 프록시, 포트 포워딩의 역할을 한다. 웹 서버에서 넘어온 요청은 내부 방화벽을 거쳐 WAS로 향한다. WAS는 어플리케이션 서버로 비즈니스 로직을 담당한다. REST API 방식을 사용하고 있다면 API서버라고 생각하면 된다. WAS에서 동적 콘텐츠 제공을 위해 DB 서버와 요청을 주고 받는다. 

웹서버 - WAS - DB 서버의 관계를 흔히 3 Tier 라고 부른다. 그리고 이들이 서비스 제공에 핵심이기 때문에 HA 보장을 위해 이중화 처리를 해둔다. 이중화를 했음을 의미하는 바가 나비 모양의 선 표시이다. 

DB 서버에서 데이터를 저장하고 있는 것이 흔하지만, 대규모 시스템에서 서버가 다운될 것을 고려해 주기적으로 백업을 진행한다. 백업 데이터를 외장 스토리지에 저장하기 위해 SAN 스위치를 사용한다. SAN 스위치 외에 다른 장비가 2가지 더 있다. ( 이건 나중에 정리하도록 하죠. ) 

스토리지 내에서도 볼륨을 나누어 운영 볼륨, 백업 볼륨으로 구성하고 물리적 디스크들을 논리적 단위로 구성하는 LUN도 여러 방식이 있다. ( 이는 온프레미스 구성도.md 파일 참조하기 )

여기까지가 기본적인 인프라 구성도이다.

이 구성도를 바탕으로 클라우드 환경에서 설계를 한다. 