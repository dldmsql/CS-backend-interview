# 쿠버네티스 개요

`쿠버네티스는 왜 등장하게 되었을까?` 라는 질문에 대한 답을 찾기 위해서는 인프라에서 서버 관리에 대한 이해가 필요하다.

서버를 관리한다는 것은 서버의 상태를 관리하는 것을 의미한다. <br/> 온프레미스 환경에서는 물리 서버를 여러 대 묶어서 가상화하여 여러 개의 어플리케이션 서버를 띄웠다. 가상화 기술 등장 이전보다 서버들을 관리하는 데 편리함이 있었지만, 가상머신 위에서 동작하는 어플리케이션 서버들이 Host 서버에 가하는 부하가 심해지면서 컨테이너 기술이 등장하게 되었다. <br/> 

컨테이너 기술의 가장 대표적인 것이 도커🐳 이다. <br/> 도커는 경량화된 어플리케이션 서버 구축을 가능하게 했으며, 독립적인 환경으로 운영될 수 있게 했다.

컨테이너의 대표적인 특징을 좀 더 알아보자.

- 가상머신과 비교하여 컨테이너 생성이 쉽고 효율적이다.
- 컨테이너 이미지를 이용한 배포와 롤백이 간단하다.
- 언어나 프레임워크에 상관없이 어플리케이션을 동일한 방식으로 관리한다.
- 개발, 테스팅, 운영 환경은 물론 local PC와 클라우드까지 동일한 환경을 구축할 수 있다.
- 특정 클라우드 벤더에 종속적이지 않다. 

이렇게 컨테이너를 이용하면 다양한 이점이 있다. 그러나, 컨테이너를 수십 수백개 생성하게 되면 이것 역시 관리에 어려움이 생길 수 밖에 없다. 

어떤 어려움이 있는지 구체적으로 살펴보자.

1. 배포

도커를 이용해서 배포를 할 때에는 도커가 실행되는 서버에 ssh로 접속해서, 실행중이던 도커 컨테이너를 중지시키고 새로 run을 해야 한다. <br/> 이러한 서버가 무수히 많아진다면 ...? <br/> 특정 서버에 여유가 생기거나 혹은 부하가 발생하게 된다면 ... ? <br/> 컨테이너에서 실행 중인 어플리케이션의 버전 업데이트를 해야 하는 상황이라면 ... ? <br/> 롤백 혹은 롤아웃을 해야 하는 상황이라면 ... ?

2. 서비스 검색

컨테이너 실행중인 서비스에 접근하기 위해서는 ip 주소와 port 번호를 알아야 한다. 이를 프록시 서버에 두고 접근을 하려 할 때, 컨테이너의 변경 혹은 확장이 발생하게 되면 프록시 서버에서는 이를 일일이 config에서 수정해야 한다. 또, msa로 변화하는 추세에서 컨테이너의 개수가 서비스의 개수만큼 증가하는데 이들을 관리하기는 여간 어려운 일이 아니다. 

3. 서비스 노출

서브 도메인 주소에 따라 컨테이너를 각기 다르게 실행했다고 하자. 로드밸런서에서 이들을 config를 통해 하나하나 지정을 해줘야 한다.

4. 서비스 이상, 부하 모니터링

실행 중인 컨테이너에 이상이 생겼을 때, 이것을 감지하고 확인하려면 서버에 직접 접속해서 로그를 확인해야 한다. 관리하는 컨테이너가 많다면, 어느 서버에서 실행중인지부터 확인해야 하는 번거로움이 있다. 


그래서 등장한 것이 컨테이너 오케스트레이션이다. <br/>  복잡한 컨테이너 환경을 효과적으로 관리하기 위한 도구이다. 
- 중앙 제어
- 네트워킹
- 노드 스케일
- 상태관리
- 배포 관리
- 배포 버전관리
- 서비스 등록 및 조회
- 볼륨 스토리지

대표적인 도구로는 쿠버네티스가 있다.

# 왜 쿠버네티스일까?

쿠버네티스는 컨테이너를 쉽고 빠르게 배포/확장하고 관리를 자동화해주는 오픈소스 플랫폼이다. <br/> 구글에서 만들었으며 다양한 요구사항을 만족시킬 수 있는 유연함과 어디서나 동작, 전세계 150개가 넘는 모임 등 커뮤니티가 거대하다.

또한, 최근 쿠버네티스의 인기는 나날이 상승하고 있으며, 머신러닝, CI/CD, 서비스 메시, 서버리스 등 무한한 확장성을 보유하고 있다. 